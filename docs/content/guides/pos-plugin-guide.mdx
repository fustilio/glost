# Part-of-Speech Plugin Guide

## Real-World Use Case: Grammar Learning App

**Scenario**: You're building a grammar practice app. Students need to identify nouns, verbs, adjectives, etc. in sentences to understand sentence structure.

## Before (Without POS Data)

```
Text: "The quick brown fox jumps over the lazy dog."

Students must manually identify:
- Which words are nouns?
- Which words are verbs?
- Which words are adjectives?

No automated checking or color-coding available.
```

## After (With POS Plugin)

### Input Sentence

```typescript
const sentence = "The quick brown fox jumps over the lazy dog.";
```

### With POS Tagging

```typescript
import { processGLOSTWithExtensionsAsync } from "glost-plugins";
import { createPOSExtension } from "glost-pos";
import { createEnglishPOSProvider } from "./my-nlp-provider";

// Real POS tagger (e.g., from dictionary or NLP model)
const posData = new Map([
  ["the", "article"],
  ["quick", "adjective"],
  ["brown", "adjective"],
  ["fox", "noun"],
  ["jumps", "verb"],
  ["over", "preposition"],
  ["lazy", "adjective"],
  ["dog", "noun"],
]);

const provider = createEnglishPOSProvider({ dictionary: posData });
const [posGen, posEnh] = createPOSExtension({
  targetLanguage: "en",
  provider
});

const result = await processGLOSTWithExtensionsAsync(glostDoc, [posGen, posEnh]);
```

### Output (Visualized)

```
The      [Art]  Article      ðŸ”µ
quick    [Adj]  Adjective    ðŸŸ¢
brown    [Adj]  Adjective    ðŸŸ¢
fox      [N]    Noun         ðŸ”´
jumps    [V]    Verb         ðŸŸ¡
over     [Prep] Preposition  ðŸŸ£
the      [Art]  Article      ðŸ”µ
lazy     [Adj]  Adjective    ðŸŸ¢
dog      [N]    Noun         ðŸ”´
```

### UI Implementation

```typescript
function WordWithPOS({ word }) {
  const pos = word.extras?.partOfSpeech;
  
  if (!pos) {
    return <span className="no-pos">{word.text}</span>;
  }
  
  const colors = {
    "noun": "#FF6B6B",
    "verb": "#FFD93D",
    "adjective": "#6BCB77",
    "article": "#4D96FF",
    "preposition": "#9D84B7"
  };
  
  return (
    <span 
      className={`word pos-${pos.tag}`}
      style={{ 
        borderBottom: `3px solid ${colors[pos.tag] || '#999'}`,
        cursor: 'help'
      }}
      title={`${pos.display} (${pos.abbreviation})`}
    >
      {word.text}
    </span>
  );
}
```

## Value Demonstrated

### 1. Pattern Recognition

**Exercise**: Find all adjectives describing nouns

```typescript
function findAdjectiveNounPairs(sentence) {
  const words = sentence.children;
  const pairs = [];
  
  for (let i = 0; i < words.length - 1; i++) {
    const current = words[i];
    const next = words[i + 1];
    
    if (current.extras?.partOfSpeech?.tag === "adjective" && 
        next.extras?.partOfSpeech?.tag === "noun") {
      pairs.push({
        adjective: current.text,
        noun: next.text
      });
    }
  }
  
  return pairs;
}

// Output:
// [
//   { adjective: "quick", noun: "fox" },
//   { adjective: "brown", noun: "fox" },
//   { adjective: "lazy", noun: "dog" }
// ]
```

**Student sees**: "quick fox", "brown fox", "lazy dog" - pattern learned!

### 2. Sentence Structure Visualization

```typescript
function visualizeSentenceStructure(sentence) {
  const structure = sentence.children.map(word => ({
    text: word.text,
    pos: word.extras?.partOfSpeech?.abbreviation || "?"
  }));
  
  return structure;
}

// Output:
// [Art] [Adj] [Adj] [N] [V] [Prep] [Art] [Adj] [N]
//  The  quick brown fox jumps over  the  lazy  dog
//
// Pattern visible: [Articles] introduce [Noun Phrases]
// Structure: [NP] [V] [PP-NP]
```

### 3. Grammar Exercise Generator

```typescript
function generateExercise(sentence) {
  const verbs = sentence.children.filter(
    w => w.extras?.partOfSpeech?.tag === "verb"
  );
  
  const nouns = sentence.children.filter(
    w => w.extras?.partOfSpeech?.tag === "noun"
  );
  
  return {
    question: "Replace the verb with its past tense form",
    verb: verbs[0]?.text,          // "jumps"
    answer: "jumped",
    explanation: "Regular verb: add -ed"
  };
}

// Exercise generated automatically from POS data!
```

## Real Data Example: Thai Language

### Thai POS from Lexitron Dictionary

```typescript
const thaiPOSData = new Map([
  // Nouns
  ["à¹à¸¡à¸§", "noun"],      // "cat"
  ["à¸šà¹‰à¸²à¸™", "noun"],     // "house"
  
  // Verbs
  ["à¸§à¸´à¹ˆà¸‡", "verb"],     // "run"
  ["à¸à¸´à¸™", "verb"],      // "eat"
  
  // Adjectives
  ["à¸ªà¸§à¸¢", "adjective"], // "beautiful"
  ["à¹€à¸£à¹‡à¸§", "adjective"], // "fast"
  
  // Classifiers (Thai-specific)
  ["à¸•à¸±à¸§", "classifier"], // classifier for animals
  ["à¸«à¸¥à¸±à¸‡", "classifier"], // classifier for houses
]);

const thaiProvider = createThaiPOSProvider({ 
  dictionary: thaiPOSData,
  tagger: thaiNLPTagger  // For words not in dictionary
});
```

### Thai Sentence Example

**Input**: "à¹à¸¡à¸§à¸•à¸±à¸§à¸™à¸µà¹‰à¸§à¸´à¹ˆà¸‡à¹€à¸£à¹‡à¸§"  
(This cat runs fast)

**Output with POS**:
```
à¹à¸¡à¸§   [N]    Noun         (cat)
à¸•à¸±à¸§    [Clf]  Classifier   (counter for animals)
à¸™à¸µà¹‰    [Det]  Determiner   (this)
à¸§à¸´à¹ˆà¸‡   [V]    Verb         (run)
à¹€à¸£à¹‡à¸§   [Adj]  Adjective    (fast)
```

**Pattern Shown**: [Noun] [Classifier] [Determiner] [Verb] [Adjective]  
Thai word order: Subject-Verb-Adjective (unlike English SVO)

## Practical Applications

### 1. Verb Conjugation Practice

```typescript
function generateVerbExercise(document) {
  const verbs = extractWords(document)
    .filter(w => w.extras?.partOfSpeech?.tag === "verb");
  
  return verbs.map(verb => ({
    infinitive: verb.text,
    exercise: `What is the past tense of "${verb.text}"?`,
    type: "verb-conjugation"
  }));
}

// Auto-generates exercises for all verbs in text
// "jumps" â†’ "What is the past tense of 'jumps'?"
```

### 2. Word Class Sorting Game

```typescript
function createSortingGame(sentence) {
  const words = shuffle(sentence.children);
  const categories = {
    nouns: [],
    verbs: [],
    adjectives: [],
    other: []
  };
  
  return {
    instruction: "Drag each word to its correct category",
    words: words.map(w => w.text),
    correctAnswers: categories,  // Pre-computed from POS data
    checkAnswer: (userAnswer) => comparePOS(userAnswer, categories)
  };
}

// Game: Student drags "fox" to Nouns, "jumps" to Verbs, etc.
// Instant feedback based on POS data
```

### 3. Sentence Pattern Templates

```typescript
function identifyPattern(sentence) {
  const pattern = sentence.children
    .map(w => w.extras?.partOfSpeech?.abbreviation)
    .join("-");
  
  const templates = {
    "Art-Adj-N-V": "Simple descriptive sentence",
    "N-V-Prep-N": "Action with prepositional phrase",
    "Art-Adj-Adj-N-V-Prep-Art-Adj-N": "Complex descriptive narrative"
  };
  
  return {
    pattern,
    description: templates[pattern] || "Custom pattern",
    example: sentence.text
  };
}

// "The quick brown fox jumps over the lazy dog"
// â†’ Pattern: Art-Adj-Adj-N-V-Prep-Art-Adj-N
// â†’ "Complex descriptive narrative"
```

## Japanese Example: Particle Usage

### Challenge: Understanding Japanese Particles

```typescript
const japaneseText = "çŒ«ã¯é­šã‚’é£Ÿã¹ã‚‹";
// "The cat eats fish"

const japanesePOS = [
  { word: "çŒ«", pos: "noun", reading: "neko" },
  { word: "ã¯", pos: "particle", subtype: "topic-marker" },  // â† Key!
  { word: "é­š", pos: "noun", reading: "sakana" },
  { word: "ã‚’", pos: "particle", subtype: "object-marker" }, // â† Key!
  { word: "é£Ÿã¹ã‚‹", pos: "verb", reading: "taberu" }
];
```

**Visualization**:
```
çŒ«   [N]      Noun      (cat)
ã¯   [Part]   Particle  â† Topic marker (this is what we're talking about)
é­š   [N]      Noun      (fish)
ã‚’   [Part]   Particle  â† Object marker (this is what's being acted upon)
é£Ÿã¹ã‚‹ [V]     Verb      (eat)
```

**Pattern Learned**: [Topic]ã¯ [Object]ã‚’ [Verb]  
Students can now identify sentence structure!

## Data Quality Comparison

### Bad Data Example (Why Heuristics Fail)

```typescript
// âŒ WRONG: Heuristic based on word endings
function badPOSTagger(word) {
  if (word.endsWith("ing")) return "verb";     // "king", "ring" âŒ
  if (word.endsWith("ly")) return "adverb";    // "fly", "July" âŒ
  if (word.endsWith("tion")) return "noun";    // Works often âœ“ (but not complete)
  return "unknown";
}

// Misclassifications:
// "king" â†’ verb âŒ (actually noun)
// "ring" â†’ verb âŒ (could be noun or verb, context needed)
// "fly" â†’ adverb âŒ (noun or verb)
// "running" â†’ verb âœ“ (but what about "a running joke" = adjective?)
```

### Good Data Example (Dictionary/NLP Based)

```typescript
// âœ… CORRECT: From validated dictionary or NLP model
const nlpTagger = await loadStanfordNLP();

async function goodPOSTagger(word, context) {
  const result = await nlpTagger.tag([context]);
  return result.find(w => w.word === word)?.pos;
}

// Correct classifications with context:
// "running" in "He is running" â†’ verb
// "running" in "running water" â†’ adjective  
// "running" in "the running" â†’ noun
// Context matters!
```

## Integration Example: Grammar Dashboard

```typescript
import { glost } from "glost";
import { createPOSPlugin } from "glost-pos";

// 1. Setup POS provider
const posProvider = createEnglishPOSProvider({
  tagger: await loadNLPModel()
});

// 2. Create and freeze processor for reuse
const processor = glost()
  .use(createPOSPlugin({
    targetLanguage: "en",
    provider: posProvider
  }))
  .freeze();

// 3. Process text
const glostDoc = convertTextToGLOST(text, "en");
const result = await processor.process(glostDoc);

// 3. Render grammar view
function GrammarDashboard({ document }) {
  const stats = analyzePOS(document);
  
  return (
    <div>
      <h2>Grammar Analysis</h2>
      
      <div className="pos-stats">
        <POSChart data={stats} />
      </div>
      
      <div className="sentence-view">
        {document.children.map(sentence => (
          <SentenceWithPOS sentence={sentence} />
        ))}
      </div>
      
      <div className="exercises">
        <h3>Practice Exercises</h3>
        {generatePOSExercises(document).map(ex => (
          <Exercise key={ex.id} {...ex} />
        ))}
      </div>
    </div>
  );
}

// 4. Show statistics
function POSChart({ data }) {
  return (
    <div className="chart">
      <div>Nouns: {data.nouns} (40%)</div>
      <div>Verbs: {data.verbs} (20%)</div>
      <div>Adjectives: {data.adjectives} (15%)</div>
      <div>Other: {data.other} (25%)</div>
    </div>
  );
}
```

## Conclusion

POS tagging transforms text from words into **grammatical structure**:

- âœ… Students see patterns (adjective + noun, subject-verb-object)
- âœ… Exercises generated automatically (find all verbs, identify noun phrases)
- âœ… Grammar rules become visible (English: SVO, Japanese: SOV)
- âœ… Language structure is teachable (particles, classifiers, articles)

**The key**: Accurate POS tags from NLP or validated dictionaries, not regex patterns.
